BIN = bin
DEBUG = Debug
RELEASE = Release
RESOURCES = resources
CMAKE_BUILD_WINDOWS = cmake-build-windows
CMAKE_BUILD_LINUX = cmake-build-linux
CMAKE_BUILD_DARWIN = cmake-build-darwin

copy:
	rm -rf ./$(BIN)/$(DEBUG)/$(RESOURCES)
	cp -r ./$(RESOURCES) ./$(BIN)/$(DEBUG)
	rm -rf ./$(BIN)/$(RELEASE)/$(RESOURCES)
	cp -r ./$(RESOURCES) ./$(BIN)/$(RELEASE)

win32:
	cmake -DFORCE_FETCH=1 -DCMAKE_BUILD_TYPE=Release -DCMAKE_BUILD_ARCHITECTURE=Win32 -S ./ -B ./${CMAKE_BUILD_WINDOWS}-Win32 -A Win32 -T v141_xp
	cmake --build ./${CMAKE_BUILD_WINDOWS}-Win32 --config Release
	copy

win64:
	cmake -DFORCE_FETCH=1 -DCMAKE_BUILD_TYPE=Release -DCMAKE_BUILD_ARCHITECTURE=x64 -S ./ -B ./${CMAKE_BUILD_WINDOWS}-x64 -A x64 -T v141_xp
	cmake --build ./${CMAKE_BUILD_WINDOWS}-x64 --config Release
	copy

win: win32 win64

linux:
	cmake -DFORCE_FETCH=1 -DCMAKE_BUILD_TYPE=${RELEASE} -S ./ -B ./${CMAKE_BUILD_LINUX}
	cmake --build ./${CMAKE_BUILD_LINUX}
	copy

darwin:
	cmake -DFORCE_FETCH=1 -DCMAKE_BUILD_TYPE=${RELEASE} -S ./ -B ./${CMAKE_BUILD_DARWIN}
	cmake --build ./${CMAKE_BUILD_DARWIN}
